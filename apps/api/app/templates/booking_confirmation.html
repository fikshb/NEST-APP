<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Booking Confirmation | {{ company_name }}</title>
<style>
  @page { size: A4; margin: 2.5cm 2cm; }
  body { font-family: 'Helvetica Neue', Arial, sans-serif; color: #212929; line-height: 1.7; font-size: 11pt; }
  .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #133437; padding-bottom: 16px; margin-bottom: 24px; }
  .logo img { max-height: 60px; }
  .company-info { text-align: right; font-size: 9pt; color: #565656; }
  .doc-title { font-size: 16pt; font-weight: 600; color: #133437; margin-bottom: 4px; }
  .doc-ref { font-size: 9pt; color: #565656; margin-bottom: 24px; }
  .section { margin-bottom: 20px; }
  .section h3 { font-size: 11pt; font-weight: 600; color: #133437; border-bottom: 1px solid #dfdbd1; padding-bottom: 4px; margin-bottom: 10px; }
  table { width: 100%; border-collapse: collapse; margin-bottom: 12px; }
  table th, table td { text-align: left; padding: 6px 10px; border-bottom: 1px solid #e5e5e0; font-size: 10pt; }
  table th { background: #f7f7f5; color: #133437; font-weight: 600; width: 35%; }
  .confirmed-badge { background: #D4EDDA; color: #155724; padding: 10px 16px; text-align: center; font-size: 11pt; font-weight: 600; margin-bottom: 24px; border-radius: 4px; }
  .rules ol { padding-left: 20px; }
  .rules li { margin-bottom: 4px; font-size: 10pt; }
  .note { background: #f7f7f5; padding: 12px 16px; border-left: 3px solid #133437; font-size: 9.5pt; color: #565656; margin-top: 20px; }
  .signature-block { margin-top: 40px; page-break-inside: avoid; }
  .sig-img { max-height: 60px; margin-top: 12px; }
  .sig-line { width: 200px; padding-top: 4px; font-size: 10pt; }
  .section { page-break-inside: avoid; }
  table { page-break-inside: avoid; }
  .note { page-break-inside: avoid; }
  .footer { margin-top: 48px; border-top: 1px solid #dfdbd1; padding-top: 10px; font-size: 8pt; color: #999; text-align: center; }
  .version-badge { display: inline-block; background: #155724; color: #fff; padding: 2px 10px; border-radius: 10px; font-size: 8pt; font-weight: 600; }
</style>
</head>
<body>

<div class="header">
  <div class="logo">
    {% if logo_data_uri %}<img src="{{ logo_data_uri }}" alt="Logo">{% endif %}
  </div>
  <div class="company-info">
    <strong>{{ company_name }}</strong><br>
    {{ company_address }}
  </div>
</div>

<div class="confirmed-badge">BOOKING CONFIRMED</div>

<div class="doc-title">Booking Confirmation</div>
<div class="doc-ref">
  <span class="version-badge">v{{ version }}</span> &nbsp;|&nbsp;
  Ref: {{ deal.deal_code }} &nbsp;|&nbsp; Date: {{ generated_at }}
</div>

<p>Dear <strong>{{ tenant.full_name }}</strong>,</p>

<p>Thank you for choosing {{ company_name }}. We are pleased to confirm your booking as detailed below.</p>

<div class="section">
  <h3>Guest Information</h3>
  <table>
    <tr><th>Guest Name</th><td>{{ tenant.full_name }}</td></tr>
    <tr><th>Email</th><td>{{ tenant.email }}</td></tr>
    <tr><th>Phone</th><td>{{ tenant.phone }}</td></tr>
    {% if tenant.company_name %}<tr><th>Company</th><td>{{ tenant.company_name }}</td></tr>{% endif %}
  </table>
</div>

<div class="section">
  <h3>Reservation Details</h3>
  <table>
    <tr><th>Unit</th><td>{{ unit.unit_code }} ({{ unit.unit_type }})</td></tr>
    <tr><th>Booking Type</th><td>{{ deal.term_type | replace("_", " ") | title }}</td></tr>
    <tr><th>Check-in Date</th><td>{{ deal.start_date }}</td></tr>
    {% if deal.end_date %}<tr><th>Check-out Date</th><td>{{ deal.end_date }}</td></tr>{% endif %}
    <tr><th>Rate</th><td><strong>{{ deal.currency }} {{ "{:,.2f}".format(effective_price | float) }}</strong> per night</td></tr>
  </table>
</div>

<div class="section">
  <h3>Check-in Information</h3>
  <table>
    <tr><th>Check-in Time</th><td>From 14:00 (2:00 PM)</td></tr>
    <tr><th>Check-out Time</th><td>By 12:00 (12:00 PM)</td></tr>
    <tr><th>Reception</th><td>Main lobby, ground floor</td></tr>
  </table>
</div>

<div class="section rules">
  <h3>House Rules</h3>
  <ol>
    <li>Check-in is available from 14:00. Early check-in is subject to availability.</li>
    <li>Check-out must be completed by 12:00 noon. Late check-out may incur additional charges.</li>
    <li>Smoking is strictly prohibited inside the premises. Designated smoking areas are available.</li>
    <li>Noise levels should be kept to a minimum between 22:00 and 08:00.</li>
    <li>No pets are allowed unless prior written approval has been obtained.</li>
    <li>Guests are responsible for the safekeeping of their personal belongings.</li>
    <li>Any damage to the property or furnishings will be charged to the guest.</li>
    <li>Please report any maintenance issues promptly to reception.</li>
  </ol>
</div>

<div class="note">
  <strong>Payment:</strong> Full payment is required upon check-in unless alternative arrangements have been agreed. We accept bank transfer and major credit cards. A valid government-issued ID is required at check-in.
</div>

<div class="signature-block">
  <p>We look forward to welcoming you.</p>
  <p>Warm regards,</p>
  {% if signature_data_uri %}
  <img src="{{ signature_data_uri }}" alt="Signature" class="sig-img">
  {% endif %}
  {% if signatory_name %}
  <div class="sig-line">
    <strong>{{ signatory_name }}</strong><br>
    {{ signatory_title }}<br>
    {{ company_name }}
  </div>
  {% endif %}
</div>

<div class="footer">
  {{ company_name }} â€” Ref: {{ deal.deal_code }} | v{{ version }} | {{ generated_at }}
</div>

</body>
</html>
